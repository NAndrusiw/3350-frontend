<div class="header">
    <div class="header-body">
        <div class="row align-items-end">
            <div class="col">
                <h6 class="header-pretitle">
                    Viewing Course
                </h6>
                <!-- Title -->
                <h1 class="header-title">
                    {{ course.data.courseCode }} - {{ course.data.courseName }}
                </h1>

            </div>
            <div *ngIf="auth.isDepartment()" class="col-auto">

                <!-- Button -->
                <a *ngIf="!this.requiresTa" (click)="toggleTaRequirement()" class="btn btn-white lift mr-3">
                    <i class="fe fe-edit-2"></i> Edit
                </a>

                <!-- Button -->
                <a *ngIf="!this.requiresTa" (click)="toggleTaRequirement()" class="btn btn-primary lift">
                    <i class="fe fe-user-plus"></i> Requires TA
                </a>

                <a *ngIf="this.requiresTa" (click)="toggleTaRequirement()" class="btn btn-danger lift">
                    <i class="fe fe-user-minus"></i> Doesn't Require TA
                </a>

            </div>

            <div *ngIf="auth.isInstructor()" class="col-auto">

                <!-- Button -->
                <h2 class="text-primary" *ngIf="this.requiresTa">
                    <span class="badge badge-soft-primary">Requires TA</span>
                </h2>

            </div>
        </div> <!-- / .row -->
    </div> <!-- / .header-body -->

</div>

<!--<div class="card shadow-lg mb-5" *ngIf="auth.isDepartment()">-->
<!--    <div class="card-body">-->
<h2>Edit Course</h2>

<div class="row">
    <div class="form-group col-md-5 col-lg-4">
        <label for="degree">Course Name</label> <input type="text" placeholder="eg. Software Engineering" id="degree" class="form-control">
    </div>
    <div class="form-group col-lg-3 col-md-4">
            <label for="hours">Total TA Hours</label>
        <div class="input-group input-group-merge">

            <input type="text" placeholder="number of hours" id="hours" class="form-control form-control-appended">
            <div class="input-group-append">
                <div class="input-group-text">
                    hours
                </div>
            </div>
        </div>
    </div>
    <div class=" col-lg-3 col-md-3">
        <label>&nbsp;</label>
     <button class="btn btn-success btn-block">
         <i class="fe fe-check"></i> Save
     </button>
    </div>
</div>

<!--    </div>-->
<!--</div>-->

<div class="row">
    <div class="col-12 col-lg-6 col-xl">

        <!-- Value  -->
        <div class="card">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col">

                        <!-- Title -->
                        <h6 class="text-uppercase text-muted mb-2">
                            Total Sections
                        </h6>

                        <!-- Heading -->
                        <span class="h2 mb-0">
                            {{ course.data.totalSections }}
                        </span>
                    </div>
                </div> <!-- / .row -->
            </div>
        </div>

    </div>
    <div class="col-12 col-lg-6 col-xl">

        <!-- Hours -->
        <div class="card">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col">

                        <!-- Title -->
                        <h6 class="text-uppercase text-muted mb-2">
                            Lecture Hours
                        </h6>

                        <!-- Heading -->
                        <span class="h2 mb-0">
                            {{ course.data.lecHours }}
                        </span>
                    </div>
                </div> <!-- / .row -->
            </div>
        </div>

    </div>
    <div class="col-12 col-lg-6 col-xl">

        <!-- Hours -->
        <div class="card">
            <div class="card-body">
                <div class="row align-items-center">
                    <div class="col">

                        <!-- Title -->
                        <h6 class="text-uppercase text-muted mb-2">
                            Lab/Tut Hours
                        </h6>

                        <!-- Heading -->
                        <span class="h2 mb-0">
                            {{ course.data.labHours }}
                        </span>
                    </div>
                </div> <!-- / .row -->
            </div>
        </div>

    </div>

</div>

<div class="card shadow-lg mb-5" *ngIf="auth.isInstructor() && requiresTa">
    <div class="card-body">

        <app-begin-question-process [courseCode]="courseId"></app-begin-question-process>

        <div *ngIf="auth.isInstructor() && requiresTa">
            <button *ngIf="!showResponses" (click)="showResponses = true" class="btn btn-white"><i class="fe fe-file-text"></i> View Responses</button>
            <button *ngIf="showResponses" (click)="showResponses = false" class="btn btn-light"><i class="fe fe-x"></i> Hide Responses</button>

            <app-rank-applicants *ngIf="showResponses" [originalQuestions]="currentInstructorQuestionRecord" [courseCode]="course.data.courseCode"></app-rank-applicants>
        </div>
    </div>
</div>

<div class="row align-items-end mb-3">
    <div class="col">
        <h2 class="header-title">
            Course Instructors
        </h2>
    </div>
    <div *ngIf="auth.isDepartment()" class="col-auto">
        <button (click)="linkInstructorsExpanded = !linkInstructorsExpanded" class="btn btn-light lift">
            <i class="fe fe-edit-3"></i> Modify Instructors
        </button>
    </div>
</div>

<app-all-instructors (linkUpdatedEvent)="fetchCourse()" *ngIf="course.data.instructors.length > 0" [selectedCourse]="course.data" [filteredInstructors]="course.data.instructors"></app-all-instructors>

<div *ngIf="course.data.instructors.length === 0 || linkInstructorsExpanded" class="alert alert-light font-weight-bold">
    <p *ngIf="course.data.instructors.length === 0" class="mb-0">There are no instructors associated with this course.
        <button *ngIf="auth.isDepartment()" class="btn btn-link font-weight-bold" (click)="linkInstructorsExpanded = !linkInstructorsExpanded">Add Instructor(s)</button>
    </p>
    <!--    <app-all-instructors (linkUpdatedEvent)="fetchCourse()" [selectedCourse]="course.data"></app-all-instructors>-->
    <h3 *ngIf="course.data.instructors.length > 0">Modify instructors for this course</h3>
    <app-all-instructors [isBeingEdited]="true" *ngIf="linkInstructorsExpanded" (linkUpdatedEvent)="fetchCourse()" [selectedCourse]="course.data"></app-all-instructors>
</div>

<h2 class="mt-3">Course Components</h2>

<div class="card card-table mb-5">
    <table class="table table-sm table-nowrap">
        <thead>
        <tr>
            <th scope="col">Class #</th>
            <th scope="col">Component</th>
            <th scope="col">Section #</th>
            <th scope="col">Start</th>
            <th scope="col">Capacity</th>
            <th scope="col">Class Status</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let enrolment of course.enrolments">
            <th scope="row">{{ enrolment.classNumber }}</th>
            <td><span class="badge {{ getComponentColor(enrolment.component) }}">{{ enrolment.component }}</span></td>
            <td>{{ enrolment.section }}</td>
            <td>{{ enrolment.startDate | dateAgo }}</td>
            <td>{{ enrolment.capEnrolment || '-' }}</td>
            <td>{{ enrolment.percentFull.toFixed(2) }}% full</td>
        </tr>
        </tbody>
    </table>

</div>

<!--<h2>Course Instructors</h2>-->

<!--<div class="card card-table">-->
<!--    <table class="table table-sm table-nowrap">-->
<!--        <thead>-->
<!--        <tr>-->
<!--            <th scope="col">Class #</th>-->
<!--            <th scope="col">Component</th>-->
<!--            <th scope="col">Section #</th>-->
<!--            <th scope="col">Start</th>-->
<!--            <th scope="col">Capacity</th>-->
<!--            <th scope="col">Class Status</th>-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        <tr *ngFor="let enrolment of course.enrolments">-->
<!--            <th scope="row">{{ enrolment.classNumber }}</th>-->
<!--            <td><span class="badge badge-soft-primary">{{ enrolment.component }}</span></td>-->
<!--            <td>{{ enrolment.section }}</td>-->
<!--            <td>{{ enrolment.startDate | dateAgo }}</td>-->
<!--            <td>{{ enrolment.capEnrolment || '-' }}</td>-->
<!--            <td>{{ enrolment.percentFull.toFixed(2) }}% full</td>-->
<!--        </tr>-->
<!--        </tbody>-->
<!--    </table>-->

<!--</div>-->
