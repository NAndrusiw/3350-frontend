<div class="header mt-md-5">
    <div class="header-body ">
        <div class="row align-items-end  animate__animated animate__faster animate__fadeInDown">
            <div class="col">
                <!-- Title -->
                <h1 class="header-title">
                    All Courses
                </h1>

            </div>
            <div *ngIf="auth.isDepartment()" class="col-auto">

                <button data-toggle="modal" data-target="#add-new-course" class="btn btn-white mr-3 lift">
                    <i class="fe fe-plus"></i> Add Course
                </button>

                <input
                        type="file" class="d-none"
                        (change)="onFileSelected($event)" #fileUpload>

                <div class="file-upload d-inline">

                    <!-- Button -->
                    <button (click)="fileUpload.click()" class="btn btn-white lift">
                        <i class="fe fe-upload"></i> Import Courses
                    </button>

                </div>
            </div>
        </div>
    </div>
</div>
<div class="card mt-4 animate__animated animate__faster animate__fadeInUp">

    <div *ngIf="allCourses?.length === 0" class="card-body">
        <div class="text-muted">
            There are no courses yet! Why don't you import some?
        </div>
    </div>


    <div *ngIf="allCourses?.length > 0" class="card-body">
        <p *ngIf="auth.isInstructor()" class="lead text-muted">These are all the courses that you teach.</p>
        <p *ngIf="auth.isDepartment()" class="lead text-muted">Browse all the courses offered.</p>

    </div>

    <div *ngIf="allCourses?.length > 0" class="card-table body">
        <app-courses-list [courses]="allCourses"></app-courses-list>
    </div>


</div>

<div *ngIf="auth.isDepartment()" class="modal fade" id="add-new-course" tabindex="-1" role="dialog" aria-labelledby="add-new-course-label" aria-hidden="true">
    <div class="modal-dialog " role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="add-new-course-label">Add A New Course</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form (ngSubmit)="saveCourse()" [formGroup]="addNewCourseForm">
                    <div class="row">
                        <div class="form-group col-4">
                            <label for="degree">Course Code</label> <input
                                type="text"
                                [ngClass]="{ 'is-invalid':  !addNewCourseForm.controls.courseCode.valid && addNewCourseForm.controls.courseCode.dirty }"
                                formControlName="courseCode"
                                placeholder="eg. SE3350"
                                id="courseCode"
                                class="form-control">
                            <div [hidden]="addNewCourseForm.controls.courseCode.valid" class="invalid-feedback">
                                Invalid course code.
                            </div>
                        </div>

                        <div class="form-group col-8">
                            <label for="degree">Course Name</label> <input
                                type="text"
                                [ngClass]="{ 'is-invalid':  !addNewCourseForm.controls.courseName.valid && addNewCourseForm.controls.courseName.dirty }"
                                formControlName="courseName"
                                placeholder="eg. Software Engineering Design I"
                                id="degree"
                                class="form-control">
                            <div [hidden]="addNewCourseForm.controls.courseName.valid" class="invalid-feedback">
                                Please enter a course name.
                            </div>
                        </div>
                        <div class="form-group col-6">
                            <label for="hours">Total TA Hours</label>
                            <div [ngClass]="{ 'is-invalid':  !addNewCourseForm.controls.totalTaHours.valid && addNewCourseForm.controls.totalTaHours.dirty }" class="input-group input-group-merge">

                                <input
                                        [ngClass]="{ 'is-invalid':  !addNewCourseForm.controls.totalTaHours.valid && addNewCourseForm.controls.totalTaHours.dirty }"
                                        formControlName="totalTaHours"
                                        type="text"
                                        id="hours"
                                        class="form-control form-control-appended">
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        hours
                                    </div>
                                </div>
                            </div>
                            <div [hidden]="addNewCourseForm.controls.totalTaHours.valid" class="invalid-feedback">
                                Please enter a valid number of hours.
                            </div>
                        </div>

                        <div class="form-group col-6">
                            <label for="sections">Total Sections</label>
                            <div [ngClass]="{ 'is-invalid':  !addNewCourseForm.controls.totalSections.valid && addNewCourseForm.controls.totalSections.dirty }" class="input-group input-group-merge">

                                <input
                                        [ngClass]="{ 'is-invalid':  !addNewCourseForm.controls.totalSections.valid && addNewCourseForm.controls.totalSections.dirty }"
                                        formControlName="totalSections"
                                        type="text"
                                        id="sections"
                                        class="form-control form-control-appended">
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        hours
                                    </div>
                                </div>
                            </div>
                            <div [hidden]="addNewCourseForm.controls.totalSections.valid" class="invalid-feedback">
                                Please enter a valid number of sections.
                            </div>
                        </div>

                        <div class="form-group col-6">
                            <label for="totalLabHours">Total Lab/Tut Hours</label>
                            <div [ngClass]="{ 'is-invalid':  !addNewCourseForm.controls.labHours.valid && addNewCourseForm.controls.labHours.dirty }" class="input-group input-group-merge">

                                <input
                                        [ngClass]="{ 'is-invalid':  !addNewCourseForm.controls.labHours.valid && addNewCourseForm.controls.labHours.dirty }"
                                        formControlName="labHours"
                                        type="text"
                                        id="totalLabHours"
                                        class="form-control form-control-appended">
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        hours
                                    </div>
                                </div>
                            </div>
                            <div [hidden]="addNewCourseForm.controls.labHours.valid" class="invalid-feedback">
                                Please enter a valid number of lab / tutorial hours.
                            </div>
                        </div>

                        <div class="form-group col-6">
                            <label for="totalLecHours">Total Lecture Hours</label>
                            <div [ngClass]="{ 'is-invalid':  !addNewCourseForm.controls.lecHours.valid && addNewCourseForm.controls.lecHours.dirty }" class="input-group input-group-merge">

                                <input
                                        [ngClass]="{ 'is-invalid':  !addNewCourseForm.controls.lecHours.valid && addNewCourseForm.controls.lecHours.dirty }"
                                        formControlName="lecHours"
                                        type="text"
                                        id="totalLecHours"
                                        class="form-control form-control-appended">
                                <div class="input-group-append">
                                    <div class="input-group-text">
                                        hours
                                    </div>
                                </div>
                            </div>
                            <div [hidden]="addNewCourseForm.controls.lecHours.valid" class="invalid-feedback">
                                Please enter a valid number of lecture hours.
                            </div>
                        </div>

                        <div class="col-12">
                            <button type="submit" [disabled]="addNewCourseForm.invalid" class="btn btn-success btn-block">
                                <i class="fe fe-check"></i> Add Course
                            </button>
                            <button type="button" class="btn btn-white btn-block" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
